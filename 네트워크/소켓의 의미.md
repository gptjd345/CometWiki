
알 수 있는 것
* 소켓의 실체
* 클라이언트가 서버에 접속한다는 의미(어플리케이션계층~전송계층의 관점에서)

### 주제 : 소켓이란 무엇인가? 

소켓은 통신 제어용 제어정보이다. 즉, 물리적으로 존재하는 게 아닌 개념적인 것이다. 
(클라이언트 프로그램과 서버프로그램 사이를 잇는 파이프의 출입구라고 생각하자. 양쪽 출입구를 먼저 만들고 파이프를 이어나간다고 생각하자. 아래 빨간 점선이 가리키는 주황부분이 소켓)


![[네트워크_소켓의 의미.png]]

소켓 = 주황부분 = 통신 제어용 제어정보이다. 
통신 제어용 정보에는 다음과 같은 것이 있다.(이외에도 더 많음)
* 출발지 IP
* 출발지 포트번호
* 목적지 IP
* 목적지 포트번호
* 소켓의 현재 통신 진행상태

```linux
/*
 * a : 통신중인 것뿐만 아니라 통신 개시 전의 것도 포함하여 전부 표시 
 * n : IP 주소나 포트 번호를 번호로 표시
 * o : 소켓을 사용하고 있는 프로그램의 PID 표시
 */
netstat -ano

```

#### 소켓의 생성과정 - Client Side

서버의 도메인에 해당하는 IP조사가 끝났다면 해당 웹 서버에게 메시지를 송신하도록 OS 내부에 있는 프로토콜 스택에 의뢰를 한다. 이때 브라우저는 내부적으로 운영체제의 소켓 라이브러리를 사용하여 소켓 생성 요청을 하고 이 요청에 따라 **운영체제**가 아래의 정보를 가지고 소켓을 생성한다.   
* 출발지 IP
* 출발지 포트번호 - ==운영체제가 현재 사용하지 않는 포트 중 하나를 할당한다 (중요)==
* 목적지 IP
* 목적지 포트번호
* 소켓의 현재 통신 진행상태

클라이언트 측 운영체제에서 소캣을 생성하면 운영체제는 소켓생성을 요청한 애플리케이션(여기서는 브라우저)에게 디스크립터를 전달하고 애플리케이션은 이를 메모리에 기록해둔다. 
**디스크립터**는 애플리케이션이 소켓을 식별하기 위해 사용하는 일종의 번호표이다. 

클라이언트 측의 소켓이 생성되고나면 브라우저는 서버측의 이미 만들어진 소켓에 접속하기위해 다시 클라이언트 측 프로토콜 스택에 의뢰를 한다. 의뢰를 할때 애플리케이션(브라우저)는 OS의 소켓 라이브러리의 connect 라는 메소드를 호출한다. 이때 인자 값으로 **디스크립터, 서버의 IP 주소, 서버의 포트번호**를 전달한다. 서버측의 포트번호는 미리 약속된 번호를 사용하기 때문에 따로 조사과정이 필요하지 않다.(http 80, https 443 메일 25 등 )

>[!attention]
> * 디스크립터 : 애플리케이션이 소켓을 식별하는 것 ([[Linux]]의  파일 디스크립터와 같은 의미의 디스크립터이다.  )
> * IP 주소와 포트번호 : 클라이언트와 서버 간에 상대의 소켓을 식별하는 것 
> 
>

#### 소켓의 생성과정 - Server Side




**Socket 라이브러리**는 다양한 애플리케이션에서 네트워크 통신을 위해 네트워크 프로토콜을 직접 다루지 않고도 쉽게 사용할 수 있도록 부품화 한 여러개의 프로그램을 모아놓은 것이다. 
socket 통신에 대한 개념만 알고있으면 각 프로그래밍 언어에 맞게 구현된 API를 사용할수 있다.
ex ) socket() , bind(), listen(), accept() 






### 참고
* 


