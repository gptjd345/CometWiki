
# I. EC2 Spot Instances

- 온디맨드 인스턴스에 비해 최대 90% 할인 가능
- 최대 스팟 가격을 정의하고 현재 스팟 가격이 최대 가격보다 낮을 때 인스턴스 획득
- 시간당 스팟 가격은 수요와 용량에 따라 변동
- 현재 스팟 가격이 최대 가격을 초과할 경우, 인스턴스를 중지하거나 종료할 수 있으며 2분의 유예 기간 제공
- 배치 작업, 데이터 분석 또는 실패에 견딜 수 있는 작업에 사용
- 중요한 작업이나 데이터베이스에는 적합하지 않음

# II. Spot Fleets(스팟 플릿)

- 스팟 플릿 = 스팟 인스턴스 세트 + (선택 사항) 온디맨드 인스턴스
- 스팟 플릿은 가격 제약 조건 내에서 목표 용량을 충족하려고 시도
- 가능한 런치 풀 정의: 인스턴스 유형(m5.large), 운영체제(OS), 가용 영역(Availability Zone)
- 여러 런치 풀을 가질 수 있어 플릿이 선택 가능
- 용량 또는 최대 비용에 도달하면 스팟 플릿은 인스턴스 실행을 중지
- **스팟 인스턴스 할당 전략**
    - **lowestPrice**: 가장 낮은 가격의 풀에서 (비용 최적화, 짧은 작업)
    - **diversified**: 모든 풀에 분산 (가용성에 좋음, 긴 작업)
    - **capacityOptimized**: 인스턴스 수에 대해 최적 용량을 가진 풀
    - **priceCapacityOptimized** (권장): 가장 높은 용량을 가진 풀에서, 그 후 가장 낮은 가격의 풀 선택 (대부분의 작업에 최적), 스팟 플릿을 통해 가장 낮은 가격의 스팟 인스턴스를 자동으로 요청 가능

# III. EC2 Spot Instances와 Spot Fleets의 차이점

## 1. EC2 Spot Instances

- **단일 인스턴스**
    - 스팟 인스턴스는 단일 EC2 인스턴스를 요청하는 방식
- **가격 최적화**
    - 사용자는 스팟 인스턴스에 대해 지불할 최대 가격을 설정하고, 현재 스팟 가격이 이에 미치지 못하면 인스턴스를 획득
- **유연성**
    - 스팟 인스턴스는 주로 비용 절감과 일시적인 작업에 사용
    - ex) 배치 작업, 데이터 분석, 테스트 환경 등 실패에 견딜 수 있는 작업
- **관리**
    - 사용자는 각 인스턴스를 개별적으로 관리해야함
    - 더 싼 인스턴스가 나오면 직접 바꿔야함 (수동관리)

## 2. Spot Fleets

- **다중 인스턴스 관리**
    - 여러 스팟 인스턴스와 선택적으로 온디맨드 인스턴스를 포함하는 인스턴스 집합을 관리하는 방식
- **자동화 및 최적화**
    - 스팟 플릿은 목표 용량을 설정하고, 가격 제약 조건 내에서 이를 충족하려고 시도
    - 다양한 인스턴스 유형, 운영 체제, 가용 영역을 포함한 다양한 런치 풀을 정의할 수 있어 더 높은 유연성과 가용성을 제공
- **할당 전략**
    - 여러 할당 전략 제공
    - lowestPrice, diversified, capacityOptimized, priceCapacityOptimized 등 다양한 전략을 통해 비용 최적화, 가용성, 용량 최적화 달성
- **자동 확장**
    - 자동 확장 기능을 지원하여, 특정 조건에 따라 인스턴스를 자동으로 늘리거나 줄임
- **단일 관리**
    - 하나의 엔티티로 취급되어, 복수의 인스턴스를 중앙에서 관리

### 요약

- **EC2 Spot Instances**: 단일 인스턴스를 저렴한 가격에 사용하고자 할 때 적합
- **Spot Fleets**: 다중 인스턴스를 자동으로 관리하고, 다양한 인스턴스 유형과 전략을 통해 비용 절감과 가용성을 극대화하고자 할 때 적합.